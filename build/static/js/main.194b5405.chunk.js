(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),o=a(9),r=a.n(o),l=(a(58),a(59),a(60),a(61),a(38)),i=a(11),c=a(12),d=a(15),p=a(13),m=a(16),u=(a(62),a(63),a(14)),g="GOOGLE_API";var f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).loadGoogleData=function(e){a.props.googleApi(e),a.setState({loaded:!0,map:e})},a.loadGoogleData=function(e){a.props.googleApi(e),a.setState({loaded:!0,map:e})},a.state={center:{lat:46.482886,lng:30.73543},map:"",loaded:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){var t=new google.maps.Map(document.getElementById("map"),{center:e.state.center,zoom:5,mapTypeId:"roadmap",gestureHandling:"greedy",disableDefaultUI:!0});!1===e.state.loaded&&e.loadGoogleData(t)},500)}},{key:"render",value:function(){return n.a.createElement("div",{id:"map"})}}]),t}(n.a.Component);var y,v,h=Object(u.b)(null,function(e){return{googleApi:function(t){return e({type:g,google:t})}}})(f),E=a(3),w=a(30),b=a.n(w),k=a(37),O=a(31),N=a.n(O),S=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(E.f,{size:this.props.size,className:this.props.className},n.a.createElement(E.b,{className:this.props.cardClassname},n.a.createElement(E.c,null,n.a.createElement(E.e,null,this.props.title),this.props.children)))}}]),t}(s.Component),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={isOpen:!1,fromLatLng:"",waypoints:[],polyline:[],markers:[],addresses:[],editMode:!0,valueFrom:"",routes:[],tempAddress:"",latLng:"",error:!1,addressesCopy:[],css:"settings animated fadeOutLeft",wrapper:"settings-wrapper z0",travelMode:"",loaded:!1},a.setPoint=function(e,t){a.props.google.setCenter(e);var s=a.state.waypoints,n=a.state.polyline,o=a.state.markers;s.length>1&&n.setMap(null),s.push(e);var r=new google.maps.Marker({position:e,map:a.props.google,draggable:!0,animation:google.maps.Animation.DROP});o.push(r),(n=new google.maps.Polyline({path:s,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2})).setMap(a.props.google),a.setState({waypoints:s,polyline:n,markers:o});var l=new google.maps.InfoWindow({content:t});r.addListener("click",function(){l.open(a.props.google,r)}),google.maps.event.addListener(r,"dragend",function(){a.getNewAddress(r,r.getPosition()),setTimeout(function(){l.setContent(a.state.tempAddress)},500)})},a.getNewAddress=function(e,t){a.dismissAll();var s=a.state.polyline;s.setMap(null),a.setState({polyline:s});var n,o=a.state.markers,r=a.state.waypoints,i=a.state.addresses,c=!0,d=!1,p=void 0;try{for(var m,u=o.entries()[Symbol.iterator]();!(c=(m=u.next()).done);c=!0){var g=m.value,f=Object(l.a)(g,2),y=f[0],v=f[1];e===v&&(n=y)}}catch(h){d=!0,p=h}finally{try{c||null==u.return||u.return()}finally{if(d)throw p}}(new google.maps.Geocoder).geocode({latLng:t},function(t,s){if(s===google.maps.GeocoderStatus.OK){i[n]=t[0].formatted_address;var l={lat:t[0].geometry.location.lat(),lng:t[0].geometry.location.lng()};o[n]=e,r[n]=l,a.setState({markers:o,addresses:i,waypoints:r,tempAddress:t[0].formatted_address})}else a.notify("pointError"),o[n].setPosition(r[n]),a.setState({markers:o})}),setTimeout(function(){a.recreatePoly()},500)},a.deleteMarker=function(e){var t=a.state.markers,s=t[e],n=a.state.addresses,o=a.state.waypoints,r=!0,i=!1,c=void 0;try{for(var d,p=t.entries()[Symbol.iterator]();!(r=(d=p.next()).done);r=!0){var m=d.value,u=Object(l.a)(m,2),g=u[0],f=u[1];f===s&&(f.setMap(null),t.splice(g,1),o.splice(g,1),n.splice(g,1),a.state.polyline.getPath().removeAt(g),a.setState({markers:t,waypoints:o,addresses:n}))}}catch(y){i=!0,c=y}finally{try{r||null==p.return||p.return()}finally{if(i)throw c}}},a.deleteAllMarkers=function(){a.state.polyline.setMap(null);var e=a.state.markers,t=!0,s=!1,n=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){o.value.setMap(null)}}catch(l){s=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(s)throw n}}e=[],a.setState({markers:e,addresses:[]})},a.createRoute=function(){if(a.dismissAll(),!(a.state.waypoints.length<2)){var e,t=a.state.addresses,s=a.state.addressesCopy;s.push({from:t[0],to:t[t.length-1]});var n=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer;if(o.setOptions({suppressMarkers:!1}),o.setMap(a.props.google),a.state.waypoints.length>2){var r=a.state.waypoints,l=[],i=!0,c=!1,d=void 0;try{for(var p,m=r[Symbol.iterator]();!(i=(p=m.next()).done);i=!0){var u=p.value;l.push({location:u,stopover:!0})}}catch(g){c=!0,d=g}finally{try{i||null==m.return||m.return()}finally{if(c)throw d}}l.splice(0,1),l.splice(l.length-1,1),e={origin:new google.maps.LatLng(a.state.waypoints[0]),destination:new google.maps.LatLng(a.state.waypoints[a.state.waypoints.length-1]),waypoints:l,optimizeWaypoints:!1,travelMode:a.state.travelMode}}else e={origin:new google.maps.LatLng(a.state.waypoints[0]),destination:new google.maps.LatLng(a.state.waypoints[a.state.waypoints.length-1]),optimizeWaypoints:!1,travelMode:a.state.travelMode};n.route(e,function(e,t){if(t===window.google.maps.DirectionsStatus.OK){a.deleteAllMarkers(),o.setDirections(e),a.notify("routeCreated"),o.setMap(a.props.google);var n=a.state.routes;n.push(o),a.setState({waypoints:[],routes:n,addressesCopy:s}),a.toggleOptions()}else a.notify("routeError")})}},a.deleteRoute=function(e){var t=a.state.addressesCopy,s=a.state.routes;t.splice(e,1),s[e].setMap(null),s.splice(e,1),a.setState({routes:s,addressesCopy:t}),a.notify("routeDelete")},a.setPointAsCenter=function(e){var t=a.state.markers[e];t={lat:t.getPosition().lat(),lng:t.getPosition().lng()},a.props.google.setCenter(t)},a.recreatePoly=function(){var e=a.state.waypoints,t=a.state.polyline;(t=new google.maps.Polyline({path:e,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2})).setMap(a.props.google),a.setState({waypoints:e,polyline:t})},a.addListItem=function(){return Object.keys(a.state.addresses).map(function(e,t){var s=a.state.addresses[e];return n.a.createElement("div",{key:"item-"+t,className:"list-item-box"},n.a.createElement("div",{className:"delete-item-box index-class",key:"indexBox-"+t},n.a.createElement("span",{key:"index-"+t,className:"delete-item-btn"},t+1)),n.a.createElement(E.n,{onClick:a.setPointAsCenter.bind(null,e),hover:!0,key:t},s),n.a.createElement("div",{className:"delete-item-box",key:"box-"+t,onClick:a.deleteMarker.bind(null,e)},n.a.createElement("span",{key:"x-"+t,className:"delete-item-btn"},"X")))})},a.handleSelect=function(e){a.dismissAll();var t=a.state.addresses;Object(w.geocodeByAddress)(e).then(function(e){return Object(w.getLatLng)(e[0])}).then(function(s){t.push(e),a.setState({valueFrom:"",latLng:s,addresses:t}),a.setMarker(s,e)}).catch(function(){a.setMarker()})},a.setMarker=function(e,t){e?(a.notify("pointCreated"),a.setPoint(e,t)):a.notify("placeError")},a.onSortEnd=function(e){var t=e.oldIndex,s=e.newIndex,n=a.state.polyline;n.setMap(null),a.setState(function(e){var a=e.addresses,o=e.waypoints,r=e.markers;return{addresses:N()(a,t,s),waypoints:N()(o,t,s),markers:N()(r,t,s),polyline:n}}),a.recreatePoly()},a.listOfRoutes=function(){return Object.keys(a.state.routes).map(function(e,t){var s=a.state.addressesCopy[e],o=s.from,r=s.to;return n.a.createElement("div",{key:"item-"+t,className:"list-item-box"},n.a.createElement("div",{className:"delete-item-box index-class",key:"indexBox-"+t},n.a.createElement("span",{key:"index-"+t,className:"delete-item-btn"},t+1)),n.a.createElement(E.n,{hover:!0,key:t},"From: ",o," To: ",r),n.a.createElement("div",{className:"delete-item-box",key:"box-"+t,onClick:a.deleteRoute.bind(null,e)},n.a.createElement("span",{key:"x-"+t,className:"delete-item-btn"},"X")))})},a.toggleOptions=function(){"settings animated fadeInLeft"===a.state.css?(a.setState({css:"settings animated fadeOutLeft"}),setTimeout(function(){a.setState({wrapper:"settings-wrapper z0"})},500)):a.setState({css:"settings animated fadeInLeft",wrapper:"settings-wrapper"})},a.notify=function(e){switch(e){case"pointCreated":E.s.success("Waypoint created");break;case"pointError":E.s.error("Incorrect place to draw a line");break;case"placeError":E.s.error("Please select a place from the list");break;case"routeCreated":E.s.success("Route created");break;case"routeError":E.s.error("Its too far to create this route");break;case"routeDelete":E.s.warn("Route deleted");break;case"noResults":E.s.warn("No results for this request")}},a.chooseTravelMode=function(e){switch(e.target.value){case"DRIVING":a.setState({travelMode:google.maps.DirectionsTravelMode.DRIVING});break;case"WALKING":a.setState({travelMode:google.maps.DirectionsTravelMode.WALKING});break;case"TRANSIT":a.setState({travelMode:google.maps.DirectionsTravelMode.TRANSIT});break;case"BICYCLING":a.setState({travelMode:google.maps.DirectionsTravelMode.BICYCLING})}},a.dismissAll=function(){return E.s.dismiss()},a.onError=function(e,t){a.dismissAll(),a.notify("noResults"),t()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){y=Object(k.SortableElement)(function(e){var t=e.value;return n.a.createElement("div",{className:"list-item-box"},n.a.createElement(E.n,{hover:!0},t))}),v=Object(k.SortableContainer)(function(e){var t=e.items;return n.a.createElement("div",null,t.map(function(e,t){return n.a.createElement(y,{key:"item-".concat(t),index:t,value:e})}))})}},{key:"componentDidUpdate",value:function(){!1===this.state.loaded&&this.setState({travelMode:google.maps.DirectionsTravelMode.DRIVING,loaded:!0})}},{key:"render",value:function(){var e,t,a,s=this;return e=this.state.editMode?this.addListItem():n.a.createElement(v,{items:this.state.addresses,onSortEnd:this.onSortEnd}),a=this.listOfRoutes(),t=n.a.createElement(b.a,{value:this.state.valueFrom,onChange:function(e){return s.setState({valueFrom:e})},onSelect:this.handleSelect,onError:this.onError},function(e){var t=e.getInputProps,a=e.suggestions,s=e.getSuggestionItemProps,o=e.loading;return n.a.createElement("div",null,n.a.createElement(E.l,Object.assign({hint:"Add waypoint",id:"from_value",name:"valueFrom"},t({placeholder:"Search Places ...",className:"location-search-input"}))),n.a.createElement("div",{className:"autocomplete-dropdown-container"},o&&n.a.createElement("div",{className:"spinner-grow text-info",role:"status"}),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return n.a.createElement("div",s(e,{className:t,style:a}),n.a.createElement("span",null,e.description))})))}),n.a.createElement("div",{className:"App"},!this.props.google&&n.a.createElement("div",{className:"preloader"},n.a.createElement("div",{className:"spinner-grow text-info",role:"status"})),n.a.createElement(E.o,{color:"elegant-color-dark",dark:!0,expand:"md"},n.a.createElement(E.p,null,n.a.createElement("strong",{className:"white-text"},"RouteFinder")),n.a.createElement(E.a,{className:"toggleOptions",onClick:this.toggleOptions,color:"amber",size:"sm"},"Toggle options")),n.a.createElement(E.g,{fluid:!0},n.a.createElement(E.r,{className:"toaster",hideProgressBar:!0,newestOnTop:!0,autoClose:5e3}),n.a.createElement(E.q,{around:!0},n.a.createElement(S,{title:"Settings",size:"12",className:this.state.wrapper,cardClassname:this.state.css},n.a.createElement(E.d,null,"You can choose variant with arrows and press Enter to add a waypoint."),!!this.props.google&&t,n.a.createElement("div",{className:"options"},n.a.createElement(E.a,{size:"sm",onClick:this.createRoute},"Create Route"),n.a.createElement("input",{type:"checkbox",id:"id-name--1",name:"edit-mode",className:"switch-input",onChange:function(){return s.setState({editMode:!s.state.editMode})}}),n.a.createElement("label",{htmlFor:"id-name--1",className:"switch-label"},"Edit mode ",n.a.createElement("span",{className:"toggle--on"},"On"),n.a.createElement("span",{className:"toggle--off"},"Off")),n.a.createElement(E.h,{size:"sm",style:{display:"inline-flex"},onClick:this.chooseTravelMode},n.a.createElement(E.k,{caret:!0,color:"mdb-color",defaultValue:this.state.travelMode},"Travel Mode"),n.a.createElement(E.j,null,n.a.createElement(E.i,{value:"DRIVING"},"Driving"),n.a.createElement(E.i,{value:"BICYCLING"},"Bicycling"),n.a.createElement(E.i,{value:"TRANSIT"},"Transit"),n.a.createElement(E.i,{value:"WALKING"},"Walking")))),n.a.createElement("h3",null,"Waypoints"),n.a.createElement(E.m,{style:{marginTop:"25px"}},this.state.addresses.length>=1?e:"No waypoints created"),n.a.createElement("h3",{style:{marginTop:"10px"}},"Routes"),n.a.createElement(E.m,{style:{marginTop:"25px"}},this.state.routes.length>0?a:"No routes created")),n.a.createElement(h,null))))}}]),t}(s.Component);var C=Object(u.b)(function(e){return{google:e.map.google}})(M),I=a(25),x=a(10),j=a(52),L={google:""};var A=Object(x.c)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(j.a)({},e,{google:t.google});default:return e}}}),T=a(51),D="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):x.d,R=Object(x.e)(A,D(Object(x.a)(T.a))),P=n.a.createElement(u.a,{store:R},n.a.createElement(I.a,null,n.a.createElement(C,null)));r.a.render(P,document.getElementById("root"))},53:function(e,t,a){e.exports=a(131)},58:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.194b5405.chunk.js.map