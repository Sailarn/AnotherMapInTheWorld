(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),s=a(9),r=a.n(s),l=(a(58),a(59),a(60),a(39)),i=a(26),c=a(27),d=a(29),p=a(28),m=a(30),u=(a(61),a(62),a(11)),g="GOOGLE_API",y="FROM_WAYPOINT",f="TO_WAYPOINT",v="ADD_WAYPOINT";var h=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).loadGoogleData=function(e){a.props.googleApi(e),a.setState({loaded:!0,map:e})},a.loadGoogleData=function(e){a.props.googleApi(e),a.setState({loaded:!0,map:e})},a.state={center:{lat:46.482886,lng:30.73543},map:"",loaded:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){var t=new google.maps.Map(document.getElementById("map"),{center:e.state.center,zoom:5,mapTypeId:"roadmap"});!1===e.state.loaded&&e.loadGoogleData(t)},500)}},{key:"render",value:function(){return o.a.createElement("div",{id:"map"})}}]),t}(o.a.Component);var w,E,b=Object(u.b)(null,function(e){return{googleApi:function(t){return e({type:g,google:t})}}})(h),O=a(4),k=a(31),S=a.n(k),x=a(38),N=a(32),j=a.n(N),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={isOpen:!1,fromLatLng:"",waypoints:[],polyline:[],markers:[],addresses:[],editMode:!0,valueFrom:"",routes:[],tempAddress:"",latLng:"",error:!1,addressesCopy:[]},a.setPoint=function(e,t){a.props.google.setCenter(e);var n=a.state.waypoints,o=a.state.polyline,s=a.state.markers;n.length>1&&o.setMap(null),n.push(e);var r=new google.maps.Marker({position:e,map:a.props.google,draggable:!0,animation:google.maps.Animation.DROP});s.push(r),(o=new google.maps.Polyline({path:n,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2})).setMap(a.props.google),a.setState({waypoints:n,polyline:o,markers:s});var l=new google.maps.InfoWindow({content:t});r.addListener("click",function(){l.open(a.props.google,r)}),google.maps.event.addListener(r,"dragend",function(){a.getNewAddress(r,r.getPosition()),setTimeout(function(){l.setContent(a.state.tempAddress)},500)})},a.getNewAddress=function(e,t){var n=a.state.polyline;n.setMap(null),a.setState({polyline:n});var o,s=a.state.markers,r=a.state.waypoints,i=a.state.addresses,c=!0,d=!1,p=void 0;try{for(var m,u=s.entries()[Symbol.iterator]();!(c=(m=u.next()).done);c=!0){var g=m.value,y=Object(l.a)(g,2),f=y[0],v=y[1];e===v&&(o=f)}}catch(h){d=!0,p=h}finally{try{c||null==u.return||u.return()}finally{if(d)throw p}}(new google.maps.Geocoder).geocode({latLng:t},function(t,n){if(n===google.maps.GeocoderStatus.OK){i[o]=t[0].formatted_address;var l={lat:t[0].geometry.location.lat(),lng:t[0].geometry.location.lng()};s[o]=e,r[o]=l,a.setState({markers:s,addresses:i,waypoints:r,tempAddress:t[0].formatted_address})}else console.log("Error: ",n)}),setTimeout(function(){a.recreatePoly()},500)},a.deleteMarker=function(e){var t=a.state.markers,n=t[e],o=a.state.addresses,s=a.state.waypoints,r=!0,i=!1,c=void 0;try{for(var d,p=t.entries()[Symbol.iterator]();!(r=(d=p.next()).done);r=!0){var m=d.value,u=Object(l.a)(m,2),g=u[0],y=u[1];y===n&&(y.setMap(null),t.splice(g,1),s.splice(g,1),o.splice(g,1),a.state.polyline.getPath().removeAt(g),a.setState({markers:t,waypoints:s,addresses:o}))}}catch(f){i=!0,c=f}finally{try{r||null==p.return||p.return()}finally{if(i)throw c}}},a.deleteAllMarkers=function(){a.state.polyline.setMap(null);var e=a.state.markers,t=a.state.addresses,n=!0,o=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){r.value.setMap(null)}}catch(i){o=!0,s=i}finally{try{n||null==l.return||l.return()}finally{if(o)throw s}}e=[],t=[],a.setState({markers:e,addresses:t})},a.createRoute=function(){if(!(a.state.waypoints.length<2)){var e,t=a.state.addresses,n=a.state.addressesCopy;n.push({from:t[0],to:t[t.length-1]}),a.setState({addressesCopy:n}),a.deleteAllMarkers();var o=new google.maps.DirectionsService,s=new google.maps.DirectionsRenderer;if(s.setOptions({suppressMarkers:!1}),s.setMap(a.props.google),a.state.waypoints.length>2){var r=a.state.waypoints,l=[],i=!0,c=!1,d=void 0;try{for(var p,m=r[Symbol.iterator]();!(i=(p=m.next()).done);i=!0){var u=p.value;l.push({location:u,stopover:!0})}}catch(f){c=!0,d=f}finally{try{i||null==m.return||m.return()}finally{if(c)throw d}}l.splice(0,1),l.splice(l.length-1,1),e={origin:new google.maps.LatLng(a.state.waypoints[0]),destination:new google.maps.LatLng(a.state.waypoints[a.state.waypoints.length-1]),waypoints:l,optimizeWaypoints:!1,travelMode:google.maps.DirectionsTravelMode.DRIVING}}else e={origin:new google.maps.LatLng(a.state.waypoints[0]),destination:new google.maps.LatLng(a.state.waypoints[a.state.waypoints.length-1]),optimizeWaypoints:!1,travelMode:google.maps.DirectionsTravelMode.DRIVING};o.route(e,function(e,t){t===window.google.maps.DirectionsStatus.OK&&s.setDirections(e)}),s.setMap(a.props.google);var g=a.state.waypoints,y=a.state.routes;g=[],y.push(s),a.setState({waypoints:g,routes:y})}},a.deleteRoute=function(e){var t=a.state.addressesCopy,n=a.state.routes;t.splice(e,1),n[e].setMap(null),n.splice(e,1),a.setState({routes:n,addressesCopy:t})},a.setPointAsCenter=function(e){var t=a.state.markers[e];t={lat:t.getPosition().lat(),lng:t.getPosition().lng()},a.props.google.setCenter(t)},a.recreatePoly=function(){var e=a.state.waypoints,t=a.state.polyline;(t=new google.maps.Polyline({path:e,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2})).setMap(a.props.google),a.setState({waypoints:e,polyline:t})},a.addListItem=function(){return Object.keys(a.state.addresses).map(function(e,t){var n=a.state.addresses[e];return o.a.createElement("div",{key:"item-"+t,className:"list-item-box"},o.a.createElement("div",{className:"delete-item-box index-class",key:"indexBox-"+t},o.a.createElement("span",{key:"index-"+t,className:"delete-item-btn"},t+1)),o.a.createElement(O.j,{onClick:a.setPointAsCenter.bind(null,e),hover:!0,key:t},n),o.a.createElement("div",{className:"delete-item-box",key:"box-"+t,onClick:a.deleteMarker.bind(null,e)},o.a.createElement("span",{key:"x-"+t,className:"delete-item-btn"},"X")))})},a.handleSelect=function(e){var t=a.state.addresses;Object(k.geocodeByAddress)(e).then(function(e){return Object(k.getLatLng)(e[0])}).then(function(n){t.push(e),a.setState({valueFrom:"",latLng:n,addresses:t})}).catch(function(){a.setState({error:!a.state.error})}),setTimeout(function(){a.state.error?a.setState({error:!a.state.error}):a.setPoint(a.state.latLng,e)},1e3)},a.onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex,o=a.state.polyline;o.setMap(null),a.setState(function(e){var a=e.addresses,s=e.waypoints,r=e.markers;return{addresses:j()(a,t,n),waypoints:j()(s,t,n),markers:j()(r,t,n),polyline:o}}),a.recreatePoly()},a.listOfRoutes=function(){return Object.keys(a.state.routes).map(function(e,t){var n=a.state.addressesCopy[e],s=n.from,r=n.to;return o.a.createElement("div",{key:"item-"+t,className:"list-item-box"},o.a.createElement("div",{className:"delete-item-box index-class",key:"indexBox-"+t},o.a.createElement("span",{key:"index-"+t,className:"delete-item-btn"},t+1)),o.a.createElement(O.j,{hover:!0,key:t},"From: ",s," To: ",r),o.a.createElement("div",{className:"delete-item-box",key:"box-"+t,onClick:a.deleteRoute.bind(null,e)},o.a.createElement("span",{key:"x-"+t,className:"delete-item-btn"},"X")))})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){w=Object(x.SortableElement)(function(e){var t=e.value;return o.a.createElement("div",{className:"list-item-box"},o.a.createElement(O.j,{hover:!0},t))}),E=Object(x.SortableContainer)(function(e){var t=e.items;return o.a.createElement("div",null,t.map(function(e,t){return o.a.createElement(w,{key:"item-".concat(t),index:t,value:e})}))})}},{key:"render",value:function(){var e,t,a,n=this;return e=this.state.editMode?this.addListItem():o.a.createElement(E,{items:this.state.addresses,onSortEnd:this.onSortEnd}),a=this.listOfRoutes(),t=o.a.createElement(S.a,{value:this.state.valueFrom,onChange:function(e){return n.setState({valueFrom:e})},onSelect:this.handleSelect},function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,s=e.loading;return o.a.createElement("div",null,o.a.createElement(O.h,Object.assign({hint:"Add waypoint",id:"from_value",name:"valueFrom"},t({placeholder:"Search Places ...",className:"location-search-input"}))),o.a.createElement("div",{className:"autocomplete-dropdown-container"},s&&o.a.createElement("div",{className:"spinner-grow text-info",role:"status"}),a.map(function(e){var t=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return o.a.createElement("div",n(e,{className:t,style:a}),o.a.createElement("span",null,e.description))})))}),o.a.createElement("div",{className:"App"},!this.props.google&&o.a.createElement("div",{className:"preloader"},o.a.createElement("div",{className:"spinner-grow text-info",role:"status"})),o.a.createElement(O.k,{color:"indigo",dark:!0,expand:"md"},o.a.createElement(O.l,null,o.a.createElement("strong",{className:"white-text"},"RouteFinder"))),o.a.createElement(O.g,{fluid:!0,style:{marginTop:"20px"}},o.a.createElement(O.m,{around:!0,style:{display:"flex",flexWrap:"wrap"}},o.a.createElement(O.f,{size:"4"},o.a.createElement(O.b,null,o.a.createElement(O.c,{className:"scroll-card"},o.a.createElement(O.e,null,"Settings"),o.a.createElement(O.d,null,"You can choose variant with arrows and press Enter to add a waypoint."),!!this.props.google&&t,o.a.createElement("div",{className:"options"},o.a.createElement(O.a,{size:"sm",onClick:this.createRoute},"Create Route"),o.a.createElement("input",{type:"checkbox",id:"id-name--1",name:"edit-mode",className:"switch-input",onChange:function(){return n.setState({editMode:!n.state.editMode})}}),o.a.createElement("label",{htmlFor:"id-name--1",className:"switch-label"},"Edit mode ",o.a.createElement("span",{className:"toggle--on"},"On"),o.a.createElement("span",{className:"toggle--off"},"Off"))),o.a.createElement(O.i,{style:{marginTop:"25px"}},this.state.addresses.length>=1&&e)))),o.a.createElement(O.f,{size:"8"},o.a.createElement(O.b,null,o.a.createElement(O.c,null,o.a.createElement(O.e,null,"Map"),o.a.createElement(b,null),o.a.createElement(O.i,{style:{marginTop:"25px"}},this.state.routes.length>0&&a)))))))}}]),t}(n.Component);var C=Object(u.b)(function(e){return{google:e.map.google,fromValue:e.map.fromWaypoint}},function(e){return{fromWaypoint:function(t){return e(function(e){return{type:y,waypoint:e}}(t))}}})(M),A=a(20),L=a(10),P=a(22),_={google:"",status:!1,fromWaypoint:"",toWaypoint:"",addWaypoint:[]};var D=Object(L.c)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(P.a)({},e,{google:t.google});case y:return Object(P.a)({},e,{fromWaypoint:t.waypoint});case f:return Object(P.a)({},e,{toWaypoint:t.waypoint});case v:return Object(P.a)({},e,{addWaypoint:e.addWaypoint.push(t.waypoint)});default:return e}}}),I=a(52),T="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):L.d,W=Object(L.e)(D,T(Object(L.a)(I.a))),R=o.a.createElement(u.a,{store:W},o.a.createElement(A.a,null,o.a.createElement(C,null)));r.a.render(R,document.getElementById("root"))},53:function(e,t,a){e.exports=a(130)},61:function(e,t,a){},62:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.f5370d1f.chunk.js.map